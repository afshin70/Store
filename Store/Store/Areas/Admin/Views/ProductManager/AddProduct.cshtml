@model Store.Areas.Admin.Models.ViewModels.ProductAddVM
@inject Store.Models.IService.Admin.IProductService _pservice
@{
    ViewData["Title"] = "AddProduct";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div id="page-wrapper">
    <br />
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="row panel panel-success">
                <div class="panel-heading">
                    <h4> افزودن محصول جدید</h4>
                </div>
            </div>
            <form asp-action="AddProduct" method="post" enctype="multipart/form-data">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="panel panel-green">
                    <div class="panel-heading">
                        مشخصات محصول
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-group col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <input asp-for="Name" class="form-control" placeholder="نام محصول" />
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <input asp-for="EName" class="form-control" placeholder="نام انگلیسی محصول" />
                                <span asp-validation-for="EName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group  col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <textarea asp-for="ShortDescription" class="form-control" placeholder="توضیحات کوتاه"></textarea>
                                <span asp-validation-for="ShortDescription" class="text-danger"></span>
                            </div>
                            <div class="form-group  col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label asp-for="MainDescription" class="control-label"></label>
                                <textarea asp-for="MainDescription" class="form-control" ></textarea>
                                <span asp-validation-for="MainDescription" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-green">
                    <div class="panel-heading">
                        جزئیات محصول
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <select class="form-control" asp-for="BrandId" asp-items="@(new SelectList(_pservice.GetAllBrands(),"BrandId","Name"))">
                                    <option value="">انتخاب برند</option>
                                </select>
                                <span asp-validation-for="BrandId" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <select class="form-control" asp-for="MainCategoryId" asp-items="@(new SelectList(_pservice.GetMainCategories(),"MainCategoryId","Name"))">
                                    <option value="">انتخاب دسته اصلی</option>
                                </select>
                                <span asp-validation-for="MainCategoryId" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <select class="form-control" asp-for="CategoryId" asp-items="@(new SelectList(string.Empty,"CategoryId","Name"))">
                                    <option value="">انتخاب دسته فرعی</option>
                                </select>
                                <span asp-validation-for="CategoryId" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <select class="form-control" asp-for="SubCategoryId" asp-items="@(new SelectList(string.Empty,"SubCategoryId","Name"))">
                                    <option value="">انتخاب دسته محصول</option>
                                </select>
                                <span asp-validation-for="SubCategoryId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <input asp-for="ExistCount" class="form-control" placeholder="موجودی کالا را به عدد وارد کنید - مثال : 2" />
                                <span asp-validation-for="ExistCount" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <input asp-for="UnitType" class="form-control" placeholder="واحد کالا (به عنوان مثال: عدد)" />
                                <span asp-validation-for="UnitType" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-2 col-md-2 col-sm-6 col-xs-12">
                                <input asp-for="SalesPrice" class="form-control" placeholder="قیمت فروش" />
                                <span asp-validation-for="SalesPrice" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <input asp-for="WrittenPrice" class="form-control" placeholder="قیمت بدون تخفیف" />
                                <span asp-validation-for="WrittenPrice" class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <input asp-for="Features" class="form-control" placeholder="ویژگی های محصول (برای مثال وزن:2 کیلو) - بعد از وارد کردن، اینتر بزنید" />
                                <span asp-validation-for="Features" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group form-check col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="IsActive" /> @Html.DisplayNameFor(model => model.IsActive)
                                </label>
                            </div>
                            <div class="form-group form-check col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                <label class="form-check-label">
                                    <input class="form-check-input" asp-for="IsSpecial" /> @Html.DisplayNameFor(model => model.IsSpecial)
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-green">
                    <div class="panel-heading">
                        سئو
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <input asp-for="Tags" class="form-control" placeholder="کلمات کلیدی - بعد از نوشتن هر کلمه، دکمه اینتر را بزنید" />
                            <span asp-validation-for="Tags" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="panel panel-green">
                    <div class="panel-heading">
                        تصاویر محصول
                        <br />
                        سایز طول و عرض تصویر باید یکسان باشد (مانند 250 در 250 پیکسل)
                    </div>
                    <div class="panel-body">
                       
                                    <div class="thumbnail col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                        <img class="img-thumbnail" src="~/lib/images/products/product-11.jpg" />
                                        <div class="form-group">
                                            <label class="control-label">تصویر اول و تصویر شاخص</label>
                                            <input asp-for="Image1" class="form-control" />
                                            <span asp-validation-for="Image1" class="text-danger"></span>
                                        </div>
                                    </div>
                                   
                                
                                    <div class="thumbnail col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                        <img class="img-thumbnail" src="~/lib/images/products/product-11.jpg" />
                                        <div class="form-group">
                                            <label class="control-label">تصویر دوم</label>
                                            <input asp-for="Image2" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="thumbnail col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                        <img class="img-thumbnail" src="~/lib/images/products/product-11.jpg" />
                                        <div class="form-group">
                                            <label class="control-label">تصویر سوم</label>
                                            <input asp-for="Image3" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="thumbnail col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                        <img class="img-thumbnail" src="~/lib/images/products/product-11.jpg" />
                                        <div class="form-group">
                                            <label class="control-label">تصویر چهارم</label>
                                            <input asp-for="Image4" class="form-control" />
                                        </div>
                                    </div>
                                   
                    </div>
                </div>
                <div class="row alert alert-info">
                    <div class="form-group">
                        <input type="submit" value="افزودن محصول" class="btn btn-success" />
                    </div>
                </div>

            </form>

        </div>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
          $(function (){
    $("#MainCategoryId").change(function () {
    var maincatid = $("#MainCategoryId").val();
    var url = '@Url.Action("GetCategoriesByMainCategoryId", "Dashboard")';
    $.getJSON(url, { id: maincatid }, function (data) {
    var items = '';
    $("#CategoryId").empty();
    $.each(data, function (i,row) {

    items += " <option value='"+row.value+"'>"+row.text+"</option>";
    });
    $("#CategoryId").html(items);
    });
    });

        });
   
    </script>
    <script>

          $(function (){
     $("#CategoryId").change(function () {
                      var catid = $("#CategoryId").val();
    var url = '@Url.Action("GetSubCategoriesByCategoryId", "Dashboard")';
    $.getJSON(url, { id: catid }, function (data) {
    var items = '';
    $("#SubCategoryId").empty();
    $.each(data, function (i,row) {

    items += " <option value='"+row.value+"'>"+row.text+"</option>";
    });
    $("#SubCategoryId").html(items);
    });
    });

    });
    </script>

}
